<!--pages/ai/ai.wxml-->
<view class="ai-container">
  <!-- 对话历史区域 -->
  <scroll-view class="chat-history" scroll-y="true" scroll-into-view="{{scrollToView}}" scroll-with-animation="true">
    <block wx:for="{{messages}}" wx:key="id">
      <view class="message-item {{item.role === 'user' ? 'user-message' : 'ai-message'}}" id="msg-{{item.id}}">
        <view class="message-avatar">
          <image src="{{item.role === 'user' ? userAvatar : aiAvatar}}" mode="aspectFill"></image>
        </view>
        <view class="message-content">
          <view class="message-text">{{item.content}}</view>
          <view class="message-time">{{item.time}}</view>
        </view>
      </view>
    </block>
  </scroll-view>

  <!-- 输入区域 -->
  <view class="input-area">
    <view class="input-box">
      <textarea 
        class="input-text" 
        value="{{inputValue}}" 
        bindinput="onInput" 
        placeholder="请输入您的问题..."
        auto-height="true"
        maxlength="500"
        cursor-spacing="20"
      ></textarea>
      <view class="send-btn {{inputValue ? 'active' : ''}}" bindtap="sendMessage">
        <image src="/images/send.png" mode="aspectFit"></image>
      </view>
    </view>
  </view>
</view>
